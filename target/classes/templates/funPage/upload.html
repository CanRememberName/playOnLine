<html>
<head>
	<link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
	<meta charset="UTF-8">
<script type="text/javascript" src="http://www.francescomalagrino.com/BootstrapPageGenerator/3/js/jquery-2.0.0.min.js"></script>
<script type="text/javascript" src="http://www.francescomalagrino.com/BootstrapPageGenerator/3/js/jquery-ui"></script>
<link href="http://www.francescomalagrino.com/BootstrapPageGenerator/3/css/bootstrap-combined.min.css" rel="stylesheet" media="screen">
<script type="text/javascript" src="http://www.francescomalagrino.com/BootstrapPageGenerator/3/js/bootstrap.min.js"></script>
<script>
	// function fileSelected() {
	// 	var file = document.getElementById('fileToUpload').files[0];
	// 	if (file) {
	// 		var fileSize = 0;
	// 		if (file.size > 1024 * 1024)
	// 			fileSize = (Math.round(file.size * 100 / (1024 * 1024)) / 100).toString() + 'MB';
	// 		else
	// 			fileSize = (Math.round(file.size * 100 / 1024) / 100).toString() + 'KB';
	//
	// 		document.getElementById('fileName').innerHTML = 'Name: ' + file.name;
	// 		document.getElementById('fileSize').innerHTML = 'Size: ' + fileSize;
	// 		document.getElementById('fileType').innerHTML = 'Type: ' + file.type;
	// 	}
	// }

	function uploadFile() {
		var fd = new FormData();
		fd.append("file", document.getElementById('file').files[0]);
		var xhr = new XMLHttpRequest();
		xhr.upload.addEventListener("progress", uploadProgress, false);
		// xhr.addEventListener("load", uploadComplete, false);
		// xhr.addEventListener("error", uploadFailed, false);
		// xhr.addEventListener("abort", uploadCanceled, false);
		xhr.open("POST", "/toUpLoad",true)
		xhr.send(fd);
	}

	function uploadProgress(evt) {
		console.log("@@@")
		if (evt.lengthComputable) {
			var percentComplete = Math.round(evt.loaded * 100 / evt.total);
			document.getElementById('progressNumber').innerHTML = percentComplete.toString() + '%';
		}
		else {
			document.getElementById('progressNumber').innerHTML = '无法计算';
		}


	}
</script>
</head>
<body>
<div class="container-fluid">
	<div class="row-fluid">
		<div class="span12">
		</div>
	</div>
	<div class="row-fluid">
		<div class="span12">
		</div>
	</div>
	<div class="row-fluid">
		<div class="span12">
			<h3>
				欢迎上传
			</h3>
			<form class="form-horizontal" th:action="@{/uploadfile}" enctype="multipart/form-data" method="post">
				<div class="control-group">
					 <label class="control-label" for="file">选择文件</label>
					<div class="controls">
						<input id="file" type="file" name="file"/>
					</div>
				</div>
				<div class="control-group">
					 <label class="control-label" for="anotherName">文件名</label>
					<div class="controls">
						<input id="anotherName" type="text" name="anotherName"/>
					</div>
				</div>
				<div class="control-group">
					<label class="control-label" for="filedetail">描述</label>
					<div class="controls">
						<input id="filedetail" type="text" name="filedetail"/>
					</div>
				</div>
				<div class="control-group">
					<label class="control-label" for="upperson">上传者</label>
					<div class="controls">
						<input id="upperson" type="text" name="upperson"/>
					</div>
				</div>
				<div class="control-group">
					<div class="controls">
						<button type="submit" class="btn" onclick="uploadFile()">上传</button>
					</div>
				</div>

				<div id="progressNumber">进度</div>
			</form>
		</div>
	</div>
</div>
</body>
</html>